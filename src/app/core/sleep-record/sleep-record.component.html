<div class="body">
  <div class="header">
    Sleep Record <span (click)="changeView()"> &#8767;</span>
  </div>

  <mat-tab-group animationDuration="0ms" [disablePagination]="true">
    <mat-tab label="Day">
      <div class="row">
        <ngx-charts-line-chart
          *ngIf="!chartView"
          [animations]="true"
          [legend]="false"
          [showXAxisLabel]="false"
          [showYAxisLabel]="false"
          [xAxis]="true"
          [yAxis]="true"
          [yAxisTicks]="['1', '5']"
          [timeline]="false"
          [results]="dataLine[0]"
          [showGridLines]="true"
          [roundDomains]="true"
          [timeline]="false"
          [curve]="curve"
        >
        </ngx-charts-line-chart>
        <ngx-charts-bar-vertical
          *ngIf="chartView"
          [view]="[285, 185]"
          [barPadding]="1"
          [animations]="true"
          [gradient]="true"
          [rotateXAxisTicks]="true"
          [xAxis]="true"
          [yAxis]="true"
          [yAxisTicks]="['1', '5']"
          [results]="data[0]"
          [customColors]="customColors[0]"
        ></ngx-charts-bar-vertical>
      </div>
    </mat-tab>
    <mat-tab label="Week">
      <div class="row">
        <ngx-charts-line-chart
          *ngIf="!chartView"
          [animations]="true"
          [legend]="false"
          [showXAxisLabel]="false"
          [showYAxisLabel]="false"
          [xAxis]="true"
          [yAxis]="true"
          [yAxisTicks]="['7', '23']"
          [timeline]="false"
          [results]="dataLine[1]"
          [showGridLines]="true"
          [roundDomains]="true"
          [timeline]="false"
          [curve]="curve"
        >
        </ngx-charts-line-chart>
        <ngx-charts-bar-vertical
          *ngIf="chartView"
          [view]="[285, 185]"
          [barPadding]="28"
          [animations]="true"
          [gradient]="true"
          [rotateXAxisTicks]="true"
          [yAxisTicks]="['7', '23']"
          [xAxis]="true"
          [yAxis]="true"
          [results]="data[1]"
          [customColors]="customColors[1]"
        ></ngx-charts-bar-vertical>
      </div>
    </mat-tab>
    <mat-tab label="Month">
      <div class="row">
        <ngx-charts-line-chart
          *ngIf="!chartView"
          [animations]="true"
          [legend]="false"
          [showXAxisLabel]="false"
          [showYAxisLabel]="false"
          [xAxis]="true"
          [yAxis]="true"
          [yAxisTicks]="['7', '23']"
          [timeline]="false"
          [results]="dataLine[2]"
          [showGridLines]="true"
          [roundDomains]="true"
          [timeline]="false"
          [curve]="curve"
        >
        </ngx-charts-line-chart>
        <ngx-charts-bar-vertical
          *ngIf="chartView"
          [view]="[285, 185]"
          [barPadding]="1"
          [animations]="true"
          [gradient]="true"
          [rotateXAxisTicks]="true"
          [yAxisTicks]="['7', '23']"
          [xAxis]="true"
          [yAxis]="true"
          [results]="data[2]"
          [customColors]="customColors[2]"
        ></ngx-charts-bar-vertical>
      </div>
    </mat-tab>
  </mat-tab-group>
  <div class="sleep-status">
    <div class="row left" *ngIf="chartView">
      <div class="circleBase type1"></div>
      <span class="grey">Above average</span>
      <div class="circleBase type2"></div>
      <span class="grey">Below average</span>
    </div>
    <h5>
      {{ datesRange[0] | date : "MMM d" }} -
      {{ datesRange[1] | date : "MMM d, y" }}
    </h5>

    <div class="row">
      <mat-card
        class="mat-card"
        [ngClass]="{
          'dark-mode': darkMode$ | async,
          'light-mode': !(darkMode$ | async)
        }"
      >
        <mat-card-subtitle class="grey">Average Time</mat-card-subtitle>
        <mat-card-content>
          <p>
            <span class="large-text">{{ averageTime }}</span>
          </p>
          <button class="btn details-btn">Details</button>
        </mat-card-content>
      </mat-card>
      <mat-card
        class="mat-card"
        [ngClass]="{
          'dark-mode': darkMode$ | async,
          'light-mode': !(darkMode$ | async)
        }"
      >
        <mat-card-subtitle class="grey">Sleep Quality</mat-card-subtitle>
        <mat-card-content>
          <p>
            <span class="large-text">{{ sleepQuality }}/</span
            ><span class="subtext">100</span>
          </p>
          <button class="btn status-btn">Good</button>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
  <div class="sleeping-state">
    <h3>Sleeping State</h3>
    <div class="row">
      <div class="progress" *ngFor="let sleepingState of sleepingStates">
        <circle-progress
          [percent]="sleepingState.rate"
          [titleColor]="(darkMode$ | async) ? '#fafbfb' : '#0d1239'"
          [unitsColor]="(darkMode$ | async) ? '#fafbfb' : '#0d1239'"
          [innerStrokeColor]="(darkMode$ | async) ? '#353958' : '#f4f4f6'"
          [outerStrokeColor]="sleepingState.outerStrokeColor"
          [outerStrokeGradientStopColor]="
            sleepingState.outerStrokeGradientStopColor
          "
        ></circle-progress>
        <span class="grey">{{ sleepingState.name }}</span>
      </div>
    </div>
  </div>
  <button (click)="onToggle()">Change mode</button>
  <button (click)="goToWatchList()">Go to watch list</button>
</div>
